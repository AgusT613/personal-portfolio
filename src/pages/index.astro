---
import Layout from "../layouts/Layout.astro";
import Hero from "../components/Hero.astro";
import Badge from "../components/Badge.astro";
import PROJECTS from "../utils/projects.js";
---

<Layout title="Torres Agustin - Portafolio">
  <main class="w-3/5">
    <Hero />

    <!-- Projects Section -->
    <section id="projects" class="flex flex-col">
      <h2 class="text-5xl text-center tracking-wider py-8">
        Proyectos Desarrollados
      </h2>
      <div class="flex flex-col gap-8">
        {
          PROJECTS.map((project) => (
            <article class="flex flex-col gap-4">
              <h3 class="text-2xl text-yellow-500">{project.name}</h3>
              <p>{project.description}</p>
              <div class="flex gap-4">
                {project.technologies.map((technology) => (
                  <Badge label={technology.label}>
                    <technology.icon class="size-6" />
                  </Badge>
                ))}
              </div>
              <picture>
                <img src={project.image.src} alt={project.image.alt} />
              </picture>
              <div class="flex gap-6 items-center justify-center">
                {project.links.map((link) => (
                  <a
                    class="bg-orange-600 rounded hover:bg-orange-400 cursor-pointer px-2 flex items-center justify-center gap-1"
                    href={link.href}
                    target="_blank"
                  >
                    {link.label}
                    <link.icon class="size-4" />
                  </a>
                ))}
              </div>
            </article>
          ))
        }
      </div>
    </section>

    <section id="about-me" class="flex flex-col justify-center gap-y-8 py-28">
      <h2 class="text-5xl text-center tracking-wider">Sobre Mí</h2>
      <article class="flex gap-6 items-center">
        <div class="flex flex-col gap-4">
          <p class="text-pretty text-gray-300">
            Mi nombre es Agus y tengo 20 años. Me gradué como <span
              class="text-blue-500">técnico electromecánico</span
            > en la secundaria y actualmente estoy cursando mis estudios universitarios
            para <span class="text-blue-500">Ingenieria Informática</span> en la
            Univerdad de Buenos Aires (UBA).
          </p>
          <p class="text-pretty text-gray-300">
            Estudio programación desde 2022, empezando por el <span
              class="text-blue-500">desarrollo de páginas web</span
            >. Durante mi último año de secundaria tuve la oportunidad de
            complementar mis conocimientos en un proyecto de <span
              class="text-blue-500"
              >electrónica, automatización, y programación</span
            >. Tambien he colaborado en la construcción de proyectos de software
            de terceros.
          </p>
          <p class="text-pretty text-gray-300">
            Me considero <span class="text-blue-500"
              >una persona curiosa, responsable y centrada</span
            >. Considero firmemente que los detalles en un proyecto marcan la
            diferencia, de esa forma destacamos el sello personal de nuestro
            producto y/o servicio.
          </p>
        </div>
        <picture>
          <img
            src="/portrait.jpg"
            alt="A picture of me, Torres Agustin"
            class="rounded-3xl"
          />
        </picture>
      </article>
    </section>
  </main>
</Layout>

<!-- Identifies the current section that is being targeted by changing the text´s color on header-nav -->
<script>
  const sections = document.querySelectorAll("section");
  const navItems = document.querySelectorAll("header nav a");

  const currentSectionCallback = (entries: any[]) => {
    entries.forEach((entry) => {
      if (entry.isIntersecting) {
        navItems.forEach((item) => {
          if (item.getAttribute("aria-label") === entry.target.id) {
            item.classList.add("text-blue-500");
            item.classList.add("scale-110");
          } else {
            item.classList.remove("text-blue-500");
            item.classList.remove("scale-110");
          }
        });
      }
    });
  };

  const options = {
    root: null,
    rootMargin: "20px",
    threshold: 0.2,
  };

  const observer = new IntersectionObserver(currentSectionCallback, options);

  sections.forEach((section) => observer.observe(section));

  document.onvisibilitychange = () => {
    if (document.visibilityState === "hidden") {
      observer.disconnect();
    } else {
      sections.forEach((section) => {
        observer.observe(section);
      });
    }
  };
</script>
