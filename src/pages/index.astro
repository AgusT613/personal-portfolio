---
import Layout from "../layouts/Layout.astro";
import CopyEmailBtn from "../components/CopyEmailBtn.astro";
import DownloadCVBtn from "../components/DownloadCVBtn.astro";
import Badge from "../components/Badge.astro";
import PROJECTS from "../utils/projects.js";
---

<Layout title="Torres Agustin - Portafolio">
  <main class="w-3/5">
    <!-- Welcome Section -->
    <section id="top" class="h-screen flex flex-col justify-center">
      <span class="text-3xl text-orange-500 font-light uppercase">
        Un gusto, soy Agus
      </span>
      <span class="text-7xl pt-3">Desarrollador Web</span>
      <span class="text-blue-400 text-lg pb-8 font-light">
        +1 AÑO DE EXPERIENCIA
      </span>
      <p class="text-lg text-gray-400 pb-2">
        Cuento con amplios conocimientos para la construcción de tu próximo
        proyecto.
      </p>
      <div class="flex gap-2">
        <CopyEmailBtn />
        <DownloadCVBtn />
      </div>
    </section>

    <!-- About Me Section -->
    <section
      id="about-me"
      class="h-screen flex flex-col justify-center gap-y-8"
    >
      <h2 class="text-5xl text-center tracking-wider">Sobre Mí</h2>
      <article
        class="self-center flex flex-col items-center justify-center gap-y-6"
      >
        <p class="text-pretty font-light tracking-wide">
          El mundo del desarrollo de software fue un área que descubrí cuando me
          encontraba cursando mis estudios secundarios. Desde ese momento
          emprendí mi camino como programador, adentrandome en el maravilloso
          mundo de la tecnología. Me encantan y me motivan las novedades
          tecnológicas, y considero que es un excelente medio para mejorar la
          calidad de vida de las personas.
        </p>
        <p class="text-pretty font-light tracking-wide">
          Estudio programación hace <span class="text-blue-500"
            >más de 1 año</span
          >, he colaborado en
          <span class="text-blue-500">proyectos de software</span>, y me estoy
          formando academicamente para <span class="text-blue-500"
            >Ingenieria en Informática</span
          > . Me considero <span class="text-orange-500"
            >una persona curiosa, responsable y centrada</span
          >. Considero firmemente que los detalles en un proyecto marcan la
          diferencia, de esa forma destacamos el sello personal de nuestro
          producto y/o servicio.
        </p>
        <p class="text-pretty font-light tracking-wide">
          Por último, te invito a que sigas recorriendo mis trabajos realizados
          y puedas pasarte por alguna de mis redes sociales para <span
            class="text-blue-500">descubrir más acerca de mi persona</span
          >. No solo la programación forma parte de mi vida, sino también otras
          actividades que me impulsan día a día a superarme.
        </p>
      </article>
    </section>

    <!-- Projects Section -->
    <section id="projects" class="flex flex-col">
      <h2 class="text-5xl text-center tracking-wider py-8">
        Proyectos Desarrollados
      </h2>
      <div class="flex flex-col gap-8">
        {
          PROJECTS.map((project) => (
            <article class="flex flex-col gap-4">
              <h3 class="text-2xl text-yellow-500">{project.name}</h3>
              <p>{project.description}</p>
              <div class="flex gap-4">
                {project.technologies.map((technology) => (
                  <Badge label={technology.label}>
                    <technology.icon class="size-6" />
                  </Badge>
                ))}
              </div>
              <picture>
                <img src={project.image.src} alt={project.image.alt} />
              </picture>
              <div class="flex gap-6 items-center justify-center">
                {project.links.map((link) => (
                  <a
                    class="bg-orange-600 rounded hover:bg-orange-400 cursor-pointer px-2 flex items-center justify-center gap-1"
                    href={link.href}
                    target="_blank"
                  >
                    {link.label}
                    <link.icon class="size-4" />
                  </a>
                ))}
              </div>
            </article>
          ))
        }
      </div>
    </section>
  </main>
</Layout>

<!-- Identifies the current section that is being targeted by changing the text´s color on header-nav -->
<script>
  const sections = document.querySelectorAll("section");
  const navItems = document.querySelectorAll("header nav a");

  const currentSectionCallback = (entries: any[]) => {
    entries.forEach((entry) => {
      if (entry.isIntersecting) {
        navItems.forEach((item) => {
          if (item.getAttribute("aria-label") === entry.target.id) {
            item.classList.add("text-blue-500");
            item.classList.add("scale-110");
          } else {
            item.classList.remove("text-blue-500");
            item.classList.remove("scale-110");
          }
        });
      }
    });
  };

  const options = {
    root: null,
    rootMargin: "20px",
    threshold: 0.2,
  };

  const observer = new IntersectionObserver(currentSectionCallback, options);

  sections.forEach((section) => observer.observe(section));

  document.onvisibilitychange = () => {
    if (document.visibilityState === "hidden") {
      observer.disconnect();
    } else {
      sections.forEach((section) => {
        observer.observe(section);
      });
    }
  };
</script>
